@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Immediate background color fix to prevent flash */
html {
  background-color: #ffffff !important;
  color: #111827 !important;
}

html.dark {
  background-color: #111827 !important;
  color: #f9fafb !important;
}

body {
  font-family: 'Inter', sans-serif;
  line-height: 1.6;
  transition: background-color 0.3s ease, color 0.3s ease;
  background-color: #ffffff !important;
  color: #111827 !important;
}

body.dark {
  background-color: #111827 !important;
  color: #f9fafb !important;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html {
  scroll-behavior: smooth;
  overflow-y: scroll;
  scrollbar-gutter: stable;
  scrollbar-width: thin;
  scrollbar-color: #9CA3AF #F3F4F6;
  background-color: #ffffff !important;
  color: #111827 !important;
}

html.dark {
  background-color: #111827 !important;
  color: #f9fafb !important;
}

/* Lightweight hardware acceleration */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Reduce animations on devices with limited resources */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Memory optimization for playground page */
.data-playground-container {
  contain: layout style paint;
  isolation: isolate;
}

/* Mobile optimizations for DAG and playground */
@media (max-width: 768px) {
  .data-playground-container {
    contain: layout style paint;
    isolation: isolate;
    /* Optimize for mobile performance */
    will-change: auto;
    transform: translateZ(0);
  }
  
  /* Mobile DAG optimizations */
  .data-playground-container .motion-div {
    /* Reduce motion on mobile for better performance */
    transition-duration: 0.3s;
  }
  
  /* Mobile table optimizations */
  .data-playground-container table {
    font-size: 0.75rem;
    line-height: 1.2;
  }
  
  /* Mobile button optimizations */
  .data-playground-container button {
    min-height: 44px; /* Touch-friendly button size */
    touch-action: manipulation;
  }
  
  /* Mobile scroll optimizations */
  .data-playground-container .overflow-x-auto {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Hide scrollbar on mobile */
  }
  
  .data-playground-container .overflow-x-auto::-webkit-scrollbar {
    display: none; /* Hide scrollbar on mobile */
  }
}

/* Touch-friendly interactions for mobile */
@media (hover: none) and (pointer: coarse) {
  .data-playground-container button:hover {
    transform: none; /* Disable hover effects on touch devices */
  }
  
  .data-playground-container .motion-div:hover {
    transform: none; /* Disable hover effects on touch devices */
  }
}

/* Homepage background optimizations */
.homepage-background {
  background-attachment: fixed;
  background-size: cover;
  background-position: center;
}

/* Smooth theme transitions */
* {
  transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}

/* Ensure proper background coverage */
html, body {
  min-height: 100vh;
  background-color: #ffffff !important;
  color: #111827 !important;
}

.dark html, .dark body {
  background-color: #111827 !important;
  color: #f9fafb !important;
}

/* Force proper background colors for homepage */
.homepage-container {
  background-color: #ffffff !important;
  color: #111827 !important;
}

.dark .homepage-container {
  background-color: #111827 !important;
  color: #f9fafb !important;
}

/* Additional background fixes to prevent black flash */
#__next {
  background-color: #ffffff !important;
  color: #111827 !important;
}

.dark #__next {
  background-color: #111827 !important;
  color: #f9fafb !important;
}

/* Force background on all main containers */
main, .main-container {
  background-color: #ffffff !important;
  color: #111827 !important;
}

.dark main, .dark .main-container {
  background-color: #111827 !important;
  color: #f9fafb !important;
}

/* Ensure 3D canvas doesn't interfere with background */
canvas {
  background: transparent !important;
}

/* Force background on canvas containers */
[data-r3f] {
  background: transparent !important;
}

/* Ensure proper layering for 3D background */
.three-js-container {
  background: transparent !important;
  pointer-events: none;
}

/* Enhanced background patterns for light mode */
.light-mode-pattern {
  background-image: 
    radial-gradient(circle at 25% 25%, rgba(75, 123, 236, 0.03) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(255, 111, 97, 0.03) 0%, transparent 50%);
}

/* Enhanced background patterns for dark mode */
.dark-mode-pattern {
  background-image: 
    radial-gradient(circle at 25% 25%, rgba(80, 166, 255, 0.05) 0%, transparent 50%),
    radial-gradient(circle at 75% 75%, rgba(255, 138, 92, 0.05) 0%, transparent 50%);
}

/* Glass morphism effects */
.glass-card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .glass-card {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* WebGL error state styling */
.webgl-disabled {
  background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
}

.dark .webgl-disabled {
  background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
}

html.dark {
  scrollbar-color: #4B5563 #1F2937;
}

h1, h2, h3, h4, h5, h6 {
  font-family: 'Poppins', sans-serif;
  @apply text-gray-900 dark:text-gray-100;
}

/* Enhanced glass effect with working color scheme */
.glass-effect {
  @apply backdrop-blur-md bg-white/40 dark:bg-gray-800/40 border border-gray-200 dark:border-gray-700 shadow-lg;
}

.glass-effect-strong {
  @apply backdrop-blur-lg bg-white/60 dark:bg-gray-800/60 border border-gray-200 dark:border-gray-700 shadow-xl;
}

/* Enhanced button styles with working color scheme */
.btn-primary {
  @apply bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105;
}

.dark .btn-primary {
  @apply bg-blue-500 hover:bg-blue-600 text-gray-900;
}

.btn-secondary {
  @apply bg-transparent border-2 border-blue-600 text-blue-600 hover:bg-blue-600 hover:text-white font-semibold py-3 px-6 rounded-lg transition-all duration-300 hover:border-orange-500;
}

.dark .btn-secondary {
  @apply border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-gray-900 hover:border-orange-400;
}

/* Enhanced card styles with working color scheme */
.card {
  @apply bg-white border border-gray-200 rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105;
}

.dark .card {
  @apply bg-gray-800 border-gray-700 shadow-2xl;
}

.gradient-text {
  @apply bg-gradient-to-r from-blue-600 to-orange-500 dark:from-blue-400 dark:to-orange-400 bg-clip-text text-transparent;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.project-card {
  @apply transition-all duration-300 ease-in-out bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden shadow-lg hover:shadow-2xl transform hover:scale-105 hover:-translate-y-2;
}

/* Navigation styles */
.nav-link {
  @apply text-gray-600 hover:text-blue-600 dark:text-gray-300 dark:hover:text-blue-400 transition-colors duration-300 font-medium;
}

.nav-link.active {
  @apply text-blue-600 dark:text-blue-400 font-medium;
}

/* Custom scrollbar - Enhanced visibility */
::-webkit-scrollbar {
  width: 14px;
}

::-webkit-scrollbar-track {
  background: #F3F4F6;
  border-radius: 8px;
}

::-webkit-scrollbar-thumb {
  background: #9CA3AF;
  border-radius: 8px;
  border: 2px solid #F3F4F6;
}

::-webkit-scrollbar-thumb:hover {
  background: #4B7BEC;
}

::-webkit-scrollbar-thumb:active {
  background: #3B6BD9;
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar-track {
  background: #1F2937;
}

.dark ::-webkit-scrollbar-thumb {
  background: #4B5563;
  border: 2px solid #1F2937;
}

.dark ::-webkit-scrollbar-thumb:hover {
  background: #50A6FF;
}

.dark ::-webkit-scrollbar-thumb:active {
  background: #3B82F6;
}

/* Improved focus styles */
:focus-visible {
  @apply outline-2 outline-offset-2 outline-blue-600 dark:outline-blue-400;
}

/* Selection colors */
::selection {
  @apply bg-blue-600/20 dark:bg-blue-400/20;
}

/* Mobile-specific optimizations */
@media (max-width: 768px) {
  /* Improve touch targets */
  button, a, input, textarea, select {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Better text readability on mobile */
  body {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }
  
  /* Prevent zoom on form inputs */
  input[type="text"],
  input[type="email"],
  input[type="tel"],
  input[type="password"],
  textarea,
  select {
    font-size: 16px;
  }
  
  /* Smooth scrolling performance */
  * {
    -webkit-overflow-scrolling: touch;
  }
  
  /* Remove tap highlight */
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Optimize animations for mobile */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* High DPI displays */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  /* Crisp images and icons */
  img, svg {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Mobile landscape optimizations */
@media (max-height: 500px) and (orientation: landscape) {
  .hero-section {
    min-height: 70vh;
  }
  
  .mobile-nav {
    max-height: 60vh;
    overflow-y: auto;
  }
}

/* Safe area for iOS devices with notch */
@supports (padding: max(0px)) {
  .safe-area-top {
    padding-top: max(1rem, env(safe-area-inset-top));
  }
  
  .safe-area-bottom {
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
  
  .safe-area-left {
    padding-left: max(1rem, env(safe-area-inset-left));
  }
  
  .safe-area-right {
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}
